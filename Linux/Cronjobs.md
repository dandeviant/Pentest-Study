https://tryhackme.com/r/room/commonlinuxprivesc
---

> [!NOTE]+ **What is Cron?**  
> The Cron daemon is a long-running process that executes commands at specific dates and times. You can use this to schedule activities, either as one-time events or as recurring tasks. You can create a crontab file containing commands and instructions for the Cron daemon to execute.

> [!NOTE]+ **How to view what Cronjobs are active.**
> We can use the command **"cat /etc/crontab"** to view what cron jobs are scheduled. This is something you should always check manually whenever you get a chance, especially if LinEnum, or a similar script, doesn't find anything.  

> [!NOTE]+ **Format of a Cronjob**
>
> Cronjobs exist in a certain format, being able to read that format is important if you want to exploit a cron job. 
> `#` = ID  
> `m` = Minute
> `h` = Hour
> `dom` = Day of the month
> `mon` = Month
> `dow` = Day of the week
> `user` = What user the command will run as  
> `command` = What command should be run
> 
> For Example,  
> `  m   h dom mon dow user  command` 
>
> `17 *   1  *   *   *  root  cd / && run-parts --report /etc/cron.hourly  `

**How can we exploit this?**

We know from our LinEnum scan, that the file autoscript.sh, on user4's Desktop is scheduled to run every five minutes. It is owned by root, meaning that it will run with root privileges, despite the fact that we can write to this file. The task then is to create a command that will return a shell and paste it in this file. When the file runs again in five minutes the shell will be running as root.